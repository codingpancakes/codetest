!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.MyWidget=n():e.MyWidget=n()}(self,(()=>(()=>{function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(n,t,o){return(t=function(n){var t=function(n){if("object"!=e(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var o=t.call(n,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}return function(){function e(){var e=document.currentScript||document.getElementById("widget-script");if(e){var o,r=e.getAttribute("data-config-token"),a=e.getAttribute("data-theme")||"light",i=document.createElement("div");i.className="my-widget-container",e.parentNode?e.parentNode.insertBefore(i,e.nextSibling):document.body.appendChild(i),r?(o=r,fetch("".concat("https://gardencenter.vercel.app","/api/widget-config/").concat(o)).then((function(e){return e.json()})).catch((function(e){throw e}))).then((function(e){n(i,t(t({},e),{},{theme:a}))})).catch((function(e){console.error("Error loading widget configuration:",e),n(i,{theme:a})})):n(i,{theme:a})}else console.error("Widget script tag not found.")}function n(e,n){var t=n.title,o=void 0===t?"Choose Your Preferences":t,r=n.message,a=void 0===r?"Select your yard space and style preferences":r,i=n.logoUrl,c=n.brandColor,d=void 0===c?"#000000":c,l=n.theme,s=void 0===l?"light":l;e.innerHTML='\n      <div class="widget-content '.concat(s,'" style="--brand-color: ').concat(d,';">\n        ').concat(i?'<img src="'.concat(i,'" alt="Logo" class="widget-logo">'):"","\n        <h3>").concat(o,"</h3>\n        <p>").concat(a,'</p>\n        <form id="widget-form">\n          \x3c!-- Step 1: Choose Yard Space --\x3e\n          <div id="step-1" class="step active">\n            <h4>Choose a starting yard space:</h4>\n            <div class="grid">\n              <label class="card">\n                <input type="radio" name="yardSpace" value="Part-shade, East Facing">\n                <img src="https://gardencenter.vercel.app/images/opt1.png" alt="Part-shade, East Facing">\n                <div class="card-content">\n                  <h5>Part-shade, East Facing</h5>\n                  <p>An east-facing yard, with shade in the back</p>\n                </div>\n              </label>\n              <label class="card">\n                <input type="radio" name="yardSpace" value="Full Sun, South Facing">\n                <img src="https://gardencenter.vercel.app/images/opt2.png" alt="Full Sun, South Facing">\n                <div class="card-content">\n                  <h5>Full Sun, South Facing</h5>\n                  <p>A south-facing yard, receiving full sun</p>\n                </div>\n              </label>\n            </div>\n            <button type="button" id="continue-to-step-2" disabled>Continue</button>\n          </div>\n\n          \x3c!-- Step 2: Choose Style Preference --\x3e\n          <div id="step-2" class="step">\n            <h4>Style preference:</h4>\n            <div class="grid">\n              <label class="card">\n                <input type="checkbox" name="style" value="Drought Tolerant">\n                <img src="https://gardencenter.vercel.app/images/opt3.png" alt="Drought Tolerant">\n                <div class="card-content">\n                  <h5>Drought Tolerant</h5>\n                  <p>Water conservation, using drought-tolerant plants</p>\n                </div>\n              </label>\n              <label class="card">\n                <input type="checkbox" name="style" value="English/Traditional">\n                <img src="https://gardencenter.vercel.app/images/opt4.png" alt="English/Traditional">\n                <div class="card-content">\n                  <h5>English/Traditional</h5>\n                  <p>Format design, structured layouts, flowering plants</p>\n                </div>\n              </label>\n              <label class="card">\n                <input type="checkbox" name="style" value="Pollinator">\n                <img src="https://gardencenter.vercel.app/images/opt5.png" alt="Pollinator">\n                <div class="card-content">\n                  <h5>Pollinator</h5>\n                  <p>Supports pollinators like bees, butterflies, and more</p>\n                </div>\n              </label>\n            </div>\n            <button type="button" id="continue-to-step-3" disabled>Continue</button>\n          </div>\n\n          \x3c!-- Step 3: Upload Garden Photo --\x3e\n          <div id="step-3" class="step">\n            <h4>Upload a photo of your garden:</h4>\n            <input type="file" id="garden-photo" name="gardenPhoto" accept="image/*">\n            <button type="submit" id="submit-button" disabled>Submit</button>\n          </div>\n\n          \x3c!-- Loader for AI simulation --\x3e\n          <div id="ai-loader" style="display: none;">\n            <p>Our AI is creating a beautiful garden for you...</p>\n            <div class="bouncing-ball"></div>\n          </div>\n\n        </form>\n        <div id="widget-response" style="display: none;"></div>\n        <div id="image-preview" style="display: none;">\n          <h4>Your Uploaded Garden Photo:</h4>\n          <img id="uploaded-image" src="" alt="Uploaded garden photo" style="max-width: 100%;">\n        </div>\n      </div>\n    '),function(){if(!document.getElementById("my-widget-styles")){var e=document.createElement("style");e.id="my-widget-styles",e.textContent="\n        .my-widget-container {\n          margin: 32px auto;\n          max-width: 800px;\n        }\n        .widget-content {\n          padding: 16px;\n          border-radius: 16px;\n          font-family: 'Roboto', sans-serif;\n          text-align: center;\n          background-color: var(--brand-color, #ffffff);\n          color: #333333;\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n        }\n        .widget-logo {\n          max-width: 80px;\n          margin-bottom: 24px;\n        }\n        h3 {\n          font-size: 1.4rem;\n          margin-bottom: 12px;\n        }\n        p {\n          font-size: 0.9rem;\n          margin-bottom: 20px;\n          color: #666666;\n        }\n        .grid {\n          display: flex;\n          gap: 16px;\n          justify-content: space-between;\n          flex-wrap: wrap;\n        }\n        .card {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n          width: 30%;\n          border-radius: 12px;\n          background-color: #ffffff;\n          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\n          overflow: hidden;\n          transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n          cursor: pointer;\n          border: 2px solid transparent;\n        }\n        .card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n        }\n        .card.selected {\n          border: 2px solid #0066cc;\n          background-color: #f0f8ff;\n        }\n        .card input {\n          display: none;\n        }\n        .card img {\n          width: 100%;\n          height: auto;\n          object-fit: cover;\n          border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n        }\n        .card-content {\n          padding: 12px;\n        }\n        #widget-form button {\n          padding: 10px 20px;\n          background-color: var(--brand-color, #0066cc);\n          border: none;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 0.9rem;\n          color: #ffffff;\n          transition: background-color 0.2s ease-in-out;\n        }\n        #widget-form button:disabled {\n          background-color: #cccccc;\n        }\n        #widget-form button:hover:not(:disabled) {\n          background-color: #0055aa;\n        }\n        #widget-response {\n          margin-top: 16px;\n          font-size: 1rem;\n          color: #333333;\n        }\n        .step {\n          display: none;\n        }\n        .step.active {\n          display: block;\n        }\n        .bouncing-ball {\n          width: 20px;\n          height: 20px;\n          background-color: #0066cc;\n          border-radius: 50%;\n          animation: bounce 0.5s infinite alternate;\n        }\n        @keyframes bounce {\n          from {\n            transform: translateY(0);\n          }\n          to {\n            transform: translateY(-20px);\n          }\n        }\n      ",document.head.appendChild(e)}}(),function(e){var n=e.querySelector("#step-1"),t=e.querySelector("#step-2"),o=e.querySelector("#step-3"),r=e.querySelector("#continue-to-step-2"),a=e.querySelector("#continue-to-step-3"),i=e.querySelector("#submit-button"),c=e.querySelector("#garden-photo"),d=e.querySelector("#widget-form"),l=e.querySelector("#ai-loader"),s=e.querySelector("#image-preview"),p=e.querySelector("#uploaded-image");n.querySelectorAll('input[name="yardSpace"]').forEach((function(e){e.addEventListener("change",(function(){r.disabled=!1}))})),r.addEventListener("click",(function(){n.classList.remove("active"),t.classList.add("active")})),t.querySelectorAll('input[name="style"]').forEach((function(e){e.addEventListener("change",(function(){var e=t.querySelectorAll('input[name="style"]:checked');a.disabled=0===e.length}))})),a.addEventListener("click",(function(){t.classList.remove("active"),o.classList.add("active")})),c.addEventListener("change",(function(){i.disabled=!c.files.length})),d.addEventListener("submit",(function(e){e.preventDefault(),l.style.display="block",o.classList.remove("active");var n,t=new FormData(d),r=c.files[0];if(r){var a=new FileReader;a.onload=function(e){p.src=e.target.result,s.style.display="block"},a.readAsDataURL(r)}(n=t,fetch("".concat("https://gardencenter.vercel.app","/api/submit-form"),{method:"POST",body:n}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new Error(e.error||"Server error")}))})).then((function(e){return e.message}))).then((function(e){l.style.display="none";var n=d.parentElement.querySelector("#widget-response");n.textContent=e,n.style.display="block",d.reset()})).catch((function(e){l.style.display="none";var n=d.parentElement.querySelector("#widget-response");n.textContent="An error occurred while submitting the form. Please try again.",n.style.display="block"}))}))}(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),{}})()));